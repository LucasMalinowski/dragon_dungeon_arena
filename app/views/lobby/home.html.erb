<head>
<!--  <script src="https://unpkg.com/flowbite@1.4.0/dist/flowbite.js"></script>-->
</head>

<body class="bg-zinc-800 h-screen">

<button data-drawer-target="separator-sidebar" data-drawer-toggle="separator-sidebar" aria-controls="separator-sidebar" type="button" class="inline-flex items-center p-2 mt-2 ms-3 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600">
  <span class="sr-only">Open sidebar</span>
  <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
    <path clip-rule="evenodd" fill-rule="evenodd" d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"></path>
  </svg>
</button>

<aside id="separator-sidebar" class="fixed top-0 left-0 z-40 w-64 h-screen transition-transform -translate-x-full sm:translate-x-0" aria-label="Sidebar">
  <div class="h-full px-3 py-4 bg-neutral-900 flex flex-col">
    <button id="close-sidebar" class="text-white ml-auto sm:hidden">
      <i class="fas fa-times"></i>
    </button>
    <a href="#" class="flex items-center mb-5 justify-center">
      <%= image_tag "logo.png", class:"size-32" %>
    </a>
    <ul class="flex flex-col space-y-2 font-medium flex-grow">
      <li>
        <%= link_to "#", class: "flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group" do %>
          <i class="fa-duotone fa-swords fa-lg ml-0.5"></i>
          <span class="ms-3 whitespace-nowrap">Play</span>
        <% end %>
      </li>
      <li>
        <%= link_to characters_path, class: "flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group" do %>
          <i class="fa-duotone fa-scroll-old fa-lg ml-0.5"></i>
          <span class="ms-3 whitespace-nowrap">Sheets</span>
        <% end %>
      </li>
      <div class="border-t border-gray-200 dark:border-gray-700"></div>
      <li>
        <%= link_to "#", class: "flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group" do %>
          <i class="fa-duotone fa-comments-question-check fa-lg ml-0.5"></i>
          <span class="flex-1 ms-3 whitespace-nowrap">Forum</span>
          <span class="inline-flex items-center justify-center w-3 h-3 p-3 ms-3 text-sm font-medium text-white bg-yellow-100 rounded-full dark:bg-yellow-900 dark:text-white">3</span>
        <% end %>
      </li>
      <li>
        <%= link_to "#", class: "flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group" do %>
          <i class="fa-duotone fa-user-group fa-lg ml-0.5"></i>
          <span class="flex-1 ms-3 whitespace-nowrap">Social</span>
        <% end %>
      </li>
      <li>
        <%= link_to edit_user_registration_path	, class: "flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group" do %>
          <i class="fa-duotone fa-user-crown fa-xl ml-0.5"></i>
          <span class="flex-1 ms-3 whitespace-nowrap">Profile</span>
        <% end %>
      </li>
      <div class="border-t border-gray-200 dark:border-gray-700"></div>
      <li>
        <%= link_to "#", class: "flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group" do %>
          <i class="fa-duotone fa-book-sparkles fa-lg ml-0.5"></i>
          <span class="flex-1 ms-3 whitespace-nowrap">DnD News</span>
        <% end %>
      </li>
      <li>
        <%= link_to "#", class: "flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group" do %>
          <i class="fa-duotone fa-map-location-dot fa-lg ml-0.5"></i>
          <span class="flex-1 ms-3 whitespace-nowrap">Interactive Maps</span>
        <% end %>
      </li>
      <div class="border-t border-gray-200 dark:border-gray-700"></div>
      <% if user_signed_in? %>
        <span class="flex p-2 items-center gap-2 text-white">
          <%= image_tag(current_user.avatar_thumbnail, class:"rounded-full size-10 border-2 border-gray-300") %><p class="truncate ..."><%= current_user.username %></p>
          <%= button_to destroy_user_session_path, method: :delete,class: "flex" do %>
            <i class="fa-duotone fa-right-from-bracket"></i>
          <% end %>
        </span>
      <% else %>
        <div class="flex justify-between">
          <li>
            <%= link_to new_user_session_path, class: "flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group" do %>
              <i class="fa-duotone fa-right-to-bracket fa-lg"></i>
              <span class="flex-1 ms-3 whitespace-nowrap">Log In</span>
            <% end %>
          </li>
          <li>
            <%= link_to new_user_registration_path, class: "flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group" do %>
              <i class="fa-duotone fa-file-pen fa-lg"></i>
              <span class="flex-1 ms-3 whitespace-nowrap">Sign Up</span>
            <% end %>
          </li>
        </div>
      <% end %>
    </ul>
    <ul class="mt-auto">
      <li>
        <%= link_to "#", class: "flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group" do %>
          <i class="fa-duotone fa-map-location-dot fa-lg ml-0.5"></i>
          <span class="flex-1 ms-3 whitespace-nowrap">Help</span>
        <% end %>
      </li>
    </ul>
  </div>
</aside>

<div class="p-4 sm:ml-64">
  <div class="relative" data-controller="carousel">
    <div class="absolute left-0 bottom-0 top-0 flex items-center">
      <button type="button" class="rounded-full bg-gray-300">></button>
    </div>
    <div class="absolute right-0 bottom-0 top-0 flex items-center">
      <button type="button" class="rounded-full bg-gray-300"><</button>
    </div>
    <% @photos.each_with_index do |photo, idx| %>
      <img
        width="80px"
        height="80px"
        src="<%= url_for(photo) %>"
      >
      <div data-carousel-target="image" class="<%= idx > 0 ? "hidden" : nil %>">
        <%=
          turbo_frame_tag "photo-#{photo.id}",
                          class: "absolute top-0 left-0 right-0 bottom-0",
                          src: photo,
                          loading: :lazy
        %>
      </div>
    <% end %>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const sidebar = document.getElementById('separator-sidebar');
    const toggleButton = document.querySelector('[data-drawer-toggle]');
    const closeButton = document.getElementById('close-sidebar');

    toggleButton.addEventListener('click', function () {
      sidebar.classList.toggle('-translate-x-full');
    });

    closeButton.addEventListener('click', function () {
      sidebar.classList.add('-translate-x-full');
    });

    window.addEventListener('click', function (event) {
      if (window.innerWidth < 640 && !sidebar.contains(event.target) && !toggleButton.contains(event.target)) {
        sidebar.classList.add('-translate-x-full');
      }
    });
  });

</script>


</body>